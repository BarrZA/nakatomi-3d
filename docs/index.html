<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nakatomi Plaza 1988 – Online</title>
  <style>
    html, body, #root { margin:0; padding:0; width:100%; height:100%; background:#000; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .hint { position:absolute; bottom:16px; left:50%; transform:translateX(-50%); font-size:12px; color:rgba(255,255,255,0.9); background:rgba(0,0,0,0.4); border-radius:999px; padding:6px 10px; }
    .toggle { position:absolute; top:16px; right:16px; background:rgba(255,255,255,0.85); backdrop-filter: blur(6px); border-radius:16px; padding:6px 10px; box-shadow: 0 6px 16px rgba(0,0,0,0.15); display:flex; align-items:center; gap:8px; font-size:12px; font-weight:600; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import React, { useMemo, useRef, useState } from 'https://esm.sh/react@18.2.0';
    import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
    import * as THREE from 'https://esm.sh/three@0.164.1';
    import { Canvas, useFrame } from 'https://esm.sh/@react-three/fiber@8.15.15?deps=three@0.164.1&external=react,react-dom';
    import { OrbitControls, Html } from 'https://esm.sh/@react-three/drei@9.88.7?deps=three@0.164.1&external=react,react-dom,@react-three/fiber';

    function WindowStripeMaterial({ color = "#9fb4c7" }) {
      const mat = useMemo(() => new THREE.MeshStandardMaterial({ color, metalness: 0.6, roughness: 0.25 }), [color]);
      return React.createElement('primitive', { object: mat, attach: 'material' });
    }

    function Hint({ position = [0,0,0], text = "" }) {
      const [hover, setHover] = useState(false);
      return React.createElement(
        'group',
        { position },
        React.createElement('mesh', { onPointerOver:()=>setHover(true), onPointerOut:()=>setHover(false) },
          React.createElement('sphereGeometry', { args:[0.06, 12, 12] }),
          React.createElement('meshStandardMaterial', { emissive: "#ffd166", emissiveIntensity: 1.5, color: "#333" })
        ),
        hover && React.createElement(Html, { center: true },
          React.createElement('div', { style:{ padding:"4px 6px", background:"rgba(0,0,0,0.7)", color:"white", fontSize:11, borderRadius:6, whiteSpace:"nowrap" } }, text)
        )
      );
    }

    function Building() {
      const podiumSize = [18, 2, 18];
      const towerSize = [12, 28, 12];
      const midSetback = [10, 6, 10];
      const crownSize = [8, 4, 8];

      return React.createElement(
        'group',
        null,
        // Podium
        React.createElement('mesh', { position:[0, podiumSize[1]/2, 0], castShadow:true, receiveShadow:true },
          React.createElement('boxGeometry', { args: podiumSize }),
          React.createElement('meshStandardMaterial', { color:"#3a3f45", roughness:0.7, metalness:0.1 })
        ),
        // Entrance canopy
        React.createElement('mesh', { position:[0, podiumSize[1] + 0.25, 7.8], castShadow:true, receiveShadow:true },
          React.createElement('boxGeometry', { args: [8, 0.5, 2] }),
          React.createElement('meshStandardMaterial', { color:"#2b2f34" })
        ),
        // Limo
        React.createElement('group', { position:[3.5, 0.6, 6.5] },
          React.createElement('mesh', { castShadow:true, receiveShadow:true },
            React.createElement('boxGeometry', { args:[3.6, 0.6, 1.2] }),
            React.createElement('meshStandardMaterial', { color:"#111" })
          ),
          React.createElement('mesh', { position:[0, 0.35, 0], castShadow:true },
            React.createElement('boxGeometry', { args:[3.2, 0.2, 1.1] }),
            React.createElement('meshStandardMaterial', { color:"#0c0c0c" })
          ),
          ...[-1.4, 1.4].flatMap(x => [-0.45, 0.45].map((z, i) =>
            React.createElement('mesh', { key:`${x}-${z}-${i}`, position:[x, 0.2, z] },
              React.createElement('cylinderGeometry', { args:[0.22, 0.22, 0.4, 16] }),
              React.createElement('meshStandardMaterial', { color:"#222" }),
              React.createElement('rotation', { args:[Math.PI/2, 0, 0] })
            )
          ))
        ),
        // Tower
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1]/2, 0], castShadow:true, receiveShadow:true },
          React.createElement('boxGeometry', { args: towerSize }),
          React.createElement('meshStandardMaterial', { color:"#4a4f57", roughness:0.6, metalness:0.2 })
        ),
        // Window stripes
        ...Array.from({ length: 14 }).map((_, i) =>
          React.createElement('mesh', { key:i, position:[0, podiumSize[1] + 1 + i * 2, 0], receiveShadow:true },
            React.createElement('boxGeometry', { args:[11.9, 0.18, 11.9] }),
            React.createElement(WindowStripeMaterial, null)
          )
        ),
        // Mid setback
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1] + midSetback[1]/2 - 1, 0], castShadow:true, receiveShadow:true },
          React.createElement('boxGeometry', { args: midSetback }),
          React.createElement('meshStandardMaterial', { color:"#434853" })
        ),
        ...Array.from({ length: 3 }).map((_, i) =>
          React.createElement('mesh', { key:`mws-${i}`, position:[0, podiumSize[1] + towerSize[1] + i * 1.5, 0] },
            React.createElement('boxGeometry', { args:[9.9, 0.15, 9.9] }),
            React.createElement(WindowStripeMaterial, null)
          )
        ),
        // Crown
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1] + midSetback[1] + crownSize[1]/2 - 1.5, 0], castShadow:true, receiveShadow:true },
          React.createElement('boxGeometry', { args: crownSize }),
          React.createElement('meshStandardMaterial', { color:"#3c414b" })
        ),
        // Helipad
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1] + midSetback[1] + crownSize[1] - 1.5, 0], receiveShadow:true },
          React.createElement('cylinderGeometry', { args:[3.5, 3.5, 0.12, 48] }),
          React.createElement('meshStandardMaterial', { color:"#d6d7d8" })
        ),
        // Helipad H
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1] + midSetback[1] + crownSize[1] - 1.44, 0.0] },
          React.createElement('boxGeometry', { args:[2.2, 0.06, 0.2] }),
          React.createElement('meshStandardMaterial', { color:"#4b4b4b" })
        ),
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1] + midSetback[1] + crownSize[1] - 1.44, 0.0] },
          React.createElement('boxGeometry', { args:[0.2, 0.06, 1.8] }),
          React.createElement('meshStandardMaterial', { color:"#4b4b4b" })
        ),
        // Mast
        React.createElement('mesh', { position:[0, podiumSize[1] + towerSize[1] + midSetback[1] + crownSize[1] + 0.5 - 1.5, 0] },
          React.createElement('cylinderGeometry', { args:[0.08, 0.08, 2.5, 8] }),
          React.createElement('meshStandardMaterial', { color:"#888" })
        ),
        // Debris
        ...Array.from({ length: 12 }).map((_, i) =>
          React.createElement('mesh', { key:`deb-${i}`, position:[(Math.random()-0.5)*5, podiumSize[1] + towerSize[1] + midSetback[1] + crownSize[1] - 1.8, (Math.random()-0.5)*5] },
            React.createElement('boxGeometry', { args:[Math.random()*0.3+0.05, 0.05, Math.random()*0.3+0.05] }),
            React.createElement('meshStandardMaterial', { color:"#7a7a7a", roughness:0.9 })
          )
        ),
        // Vault
        React.createElement('group', { position:[-5.9, podiumSize[1] + 6, 0] },
          React.createElement('mesh', { position:[0.05, 0, 0] },
            React.createElement('boxGeometry', { args:[0.1, 2, 2] }),
            React.createElement('meshStandardMaterial', { color:"#2a2e35" })
          ),
          React.createElement('mesh', { position:[0.7, 0, 0] },
            React.createElement('boxGeometry', { args:[1.2, 1.6, 1.6] }),
            React.createElement('meshStandardMaterial', { color:"#1b1f27" })
          ),
          React.createElement('mesh', { position:[0.7, -0.2, 0] },
            React.createElement('boxGeometry', { args:[1, 0.1, 1.4] }),
            React.createElement('meshStandardMaterial', { color:"#d7c48a" })
          ),
          React.createElement(Hint, { position:[0.7, 1.1, 0], text:"Easter Egg: The vault" })
        ),
        // Vents
        React.createElement('group', { position:[5.9, podiumSize[1] + 10, 0] },
          React.createElement('mesh', null,
            React.createElement('boxGeometry', { args:[0.1, 2, 2] }),
            React.createElement('meshStandardMaterial', { color:"#565d69" })
          ),
          ...Array.from({ length: 4 }).map((_, i) =>
            React.createElement('mesh', { key:`duct-${i}`, position:[-0.4, -0.7 + i*0.45, 0] },
              React.createElement('boxGeometry', { args:[0.6, 0.08, 1.6] }),
              React.createElement('meshStandardMaterial', { color:"#737c88", metalness:0.4, roughness:0.6 })
            )
          ),
          React.createElement('pointLight', { position:[-0.5, 0.2, 0], intensity:0.8, distance:2, color:new THREE.Color(1,0.75,0.5) }),
          React.createElement(Hint, { position:[-0.2, 1.1, 0], text:"Easter Egg: the vents" })
        ),
        // Teddy bear
        React.createElement('group', { position:[-2, podiumSize[1] + 0.9, -6.2] },
          React.createElement('mesh', { position:[0, 0.2, 0] },
            React.createElement('cylinderGeometry', { args:[0.2, 0.2, 0.12, 12] }),
            React.createElement('meshStandardMaterial', { color:"#b99362" })
          ),
          React.createElement('mesh', { position:[0, 0.35, 0] },
            React.createElement('sphereGeometry', { args:[0.2, 16, 16] }),
            React.createElement('meshStandardMaterial', { color:"#a3784e" })
          ),
          React.createElement('mesh', { position:[0, 0.55, 0] },
            React.createElement('sphereGeometry', { args:[0.14, 16, 16] }),
            React.createElement('meshStandardMaterial', { color:"#a3784e" })
          ),
          React.createElement(Hint, { position:[0.2, 0.9, 0], text:"Easter Egg: teddy in the limo" })
        ),
        // Ho Ho Ho sign
        React.createElement('group', { position:[0, podiumSize[1] + 6, -6.1] },
          React.createElement('mesh', null,
            React.createElement('boxGeometry', { args:[1.8, 1.1, 0.06] }),
            React.createElement('meshStandardMaterial', { color:"#a10d0d" })
          ),
          React.createElement('mesh', { position:[0, 0, -0.035] },
            React.createElement('boxGeometry', { args:[1.6, 0.18, 0.02] }),
            React.createElement('meshStandardMaterial', { color:"#ffffff" })
          ),
          React.createElement('mesh', { position:[0, -0.22, -0.035] },
            React.createElement('boxGeometry', { args:[1.2, 0.18, 0.02] }),
            React.createElement('meshStandardMaterial', { color:"#ffffff" })
          ),
          React.createElement(Hint, { position:[0, 0.9, 0], text:"Easter Egg: 'Ho Ho Ho' jumper" })
        )
      );
    }

    function PlazaGround() {
      return React.createElement(
        'group',
        null,
        React.createElement('mesh', { rotation:[-Math.PI/2, 0, 0], receiveShadow:true },
          React.createElement('planeGeometry', { args:[120, 120] }),
          React.createElement('meshStandardMaterial', { color:"#dadfe6" })
        ),
        ...Array.from({ length: 24 }).map((_, i) =>
          React.createElement('mesh', { key:`tile-${i}`, position:[(i%6 - 2.5) * 7, 0.01, (Math.floor(i/6) - 2.5) * 7], rotation:[-Math.PI/2, 0, 0], receiveShadow:true },
            React.createElement('planeGeometry', { args:[6.5, 6.5] }),
            React.createElement('meshStandardMaterial', { color:(i%2===0) ? "#e9edf3" : "#f2f5f9" })
          )
        ),
        React.createElement('group', { position:[0, 0.8, -10] },
          React.createElement('mesh', null,
            React.createElement('boxGeometry', { args:[4.6, 1.4, 0.2] }),
            React.createElement('meshStandardMaterial', { color:"#2d333a" })
          ),
          React.createElement(Html, { center:true, position:[0, 0, 0.12] },
            React.createElement('div', { style:{ color:"white", textAlign:"center", letterSpacing:2 } },
              React.createElement('div', { style:{ fontSize:14, opacity:0.75 } }, "NAKATOMI"),
              React.createElement('div', { style:{ fontSize:24, fontWeight:700 } }, "PLAZA"),
              React.createElement('div', { style:{ fontSize:10, opacity:0.6 } }, "1988")
            )
          )
        )
      );
    }

    function DayNightToggle({ value, onChange }) {
      return React.createElement('div', { className:'toggle' },
        React.createElement('span', null, value ? "Night" : "Day"),
        React.createElement('input', { type:'checkbox', checked:value, onChange:(e)=>onChange(e.target.checked) })
      );
    }

    function Scene() {
      const [night, setNight] = useState(true);
      const dir = useRef();
      useFrame(() => {
        if (dir.current) {
          dir.current.position.set(20 * (night ? -1 : 1), 30, 15);
          dir.current.intensity = night ? 0.6 : 1.2;
        }
      });

      return React.createElement(
        'div', { style:{ width:"100%", height:"100%" } },
        React.createElement(DayNightToggle, { value:night, onChange:setNight }),
        React.createElement(Canvas, { shadows:true, camera:{ position:[26, 24, 30], fov:45 } },
          React.createElement('color', { attach:'background', args:[night ? "#0d1117" : "#cfe3ff"] }),
          React.createElement('fog', { attach:'fog', args:[night ? "#0d1117" : "#cfe3ff", 60, 160] }),
          React.createElement('ambientLight', { intensity:night ? 0.15 : 0.4 }),
          React.createElement('directionalLight', { ref:dir, castShadow:true, position:[20, 30, 15], intensity:1.2, 'shadow-mapSize-width':2048, 'shadow-mapSize-height':2048 }),
          night && React.createElement('group', null,
            ...Array.from({ length: 60 }).map((_, i) =>
              React.createElement('pointLight', { key:i, position:[(Math.random()-0.5)*10, 2 + Math.random()*32, (Math.random()-0.5)*10], intensity:0.25, distance:6 })
            )
          ),
          React.createElement(PlazaGround, null),
          React.createElement(Building, null),
          React.createElement(OrbitControls, { enableDamping:true, dampingFactor:0.12, minDistance:18, maxDistance:90, maxPolarAngle:Math.PI/2.05 })
        ),
        React.createElement('div', { className:'hint' }, "Drag to orbit • Scroll to zoom • Toggle for day/night")
      );
    }

    function App() {
      return React.createElement('div', { style:{ width:"100%", height:"100vh", background:"black" } }, React.createElement(Scene, null));
    }

    const root = createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
